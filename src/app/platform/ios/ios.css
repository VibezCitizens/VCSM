/* src/features/chat/conversation/screen/chat-screen.css */

/* ============================================================
   iOS PLATFORM BASE
   ============================================================
   Purpose:
   - Lock viewport height on iOS Safari
   - Prevent Safari from scrolling the document
*/

html.ios-keyboard {
  height: 100%;
}

html.ios-keyboard body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
}

/* ============================================================
   CHAT SCREEN ROOT
   ============================================================
   Purpose:
   - Fixed full-screen container
   - Prevents layout shifts
*/

.chat-screen {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;

  /* render only inside the visual viewport */
  height: var(--vv-height, 100dvh);

  /* follow iOS panning */
  transform: translateY(var(--vv-top, 0px));

  background: black;
  overflow: hidden;
}


/* ============================================================
   HEADER
   ============================================================
*/

.chat-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 64px;
  z-index: 10;
}

/* ============================================================
   FOOTER (INPUT HOLDER)
   ============================================================
*/

.chat-footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  min-height: 88px;
  padding-bottom: env(safe-area-inset-bottom);

  background: black;
  z-index: 10;

  transform: translateY(var(--ios-kb-offset, 0px));
  will-change: transform;

  transition: transform 120ms cubic-bezier(0.33, 1, 0.68, 1);
}

/* ============================================================
   MESSAGE LIST (SCROLLABLE AREA)
   ============================================================
*/

.chat-messages {
  position: absolute;
  top: 64px;

  bottom: calc(
    88px +
    env(safe-area-inset-bottom) +
    max(0px, calc(-1 * var(--ios-kb-offset, 0px)))
  );

  left: 0;
  right: 0;

  overflow-y: auto;
  -webkit-overflow-scrolling: touch;

  padding-bottom: calc(1px + env(safe-area-inset-bottom));
  scroll-padding-bottom: calc(1px + env(safe-area-inset-bottom));

  will-change: contents;
}

/* ============================================================
   SAFETY / QUALITY OF LIFE
   ============================================================
*/

/* Prevent Safari zoom on input focus */
input,
textarea {
  font-size: 16px;
}

/* Remove tap highlight artifacts */
* {
  -webkit-tap-highlight-color: transparent;
}

/* ============================================================
   iOS PWA OVERRIDES
   ============================================================
   Intentionally EMPTY now.
   We no longer disable footer transforms in PWA.
*/
